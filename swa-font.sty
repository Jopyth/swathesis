\RequirePackage{swa-platform}
% packages
\RequirePackage{textcomp}
\RequirePackage{textcase}
\RequirePackage{relsize}

\RequirePackage[final,babel=true]{microtype}[2013/05/23]

%
% engine-dependent, eg, encoding, loading.
%
\ifboolexpr{bool{tutex}}{%
  \RequirePackage{fontspec}
  % \newfontfeature{Microtype}{protrusion=default;expansion=default;}
}{
  \RequirePackage{fontaxes}
}


\expandafter%
\RequirePackage{swa-font-\@swa@font}


%
% microtypesetup
%
\ifthenelse{\boolean{xetex}}{%
  \let\textls\undefined
  \DeclareRobustCommand{\textls}[2][80]{%
    {{\addfontfeature{LetterSpace=\the\numexpr#1/10\relax}#2}}}
}{}

\ifboolexpr{bool{tutex}}{
  \microtypesetup{stretch=9,shrink=15,step=3}
}{
  \microtypesetup{stretch=9,shrink=15,step=3,tracking=smallcaps,letterspace=75}
}

%
% useful commands
%
\DeclareRobustCommand{\spacedallcaps}[1]{\textls[80]{\MakeTextUppercase{#1}}}%
\ifboolexpr{bool{tutex}}%
  {\DeclareRobustCommand{\spacedlowsmallcaps}[1]{{{\textls[75]{\scshape\MakeTextLowercase{#1}}}}}%
  {\DeclareRobustCommand{\spacedlowsmallcaps}[1]{{\scshape\MakeTextLowercase{#1}}}}%

\DeclareRobustCommand\Largespacedlowsmallcaps[1]{\spacedlowsmallcaps{\Large #1}}}


%
